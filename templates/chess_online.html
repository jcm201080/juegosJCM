{% extends "base.html" %} {% block title %}Ajedrez Online{% endblock %} {% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/chess.css') }}" />
<link rel="stylesheet" href="{{ url_for('static', filename='css/chess_online.css') }}" />
{% endblock %} {% block content %}

<div class="game-container chess-container">
    <h1>ğŸŒ Ajedrez Online</h1>

    <!-- Selector de modo -->
    <div class="modo-links">
        <a
            class="{% if request.endpoint == 'chess_routes.chess' %}btn-primary{% else %}btn-secondary{% endif %}"
            href="{{ url_for('chess_routes.chess') }}"
        >
            â™Ÿï¸ Ajedrez (local)
        </a>

        <a
            class="{% if request.endpoint == 'chess_routes.chess_online' %}btn-primary{% else %}btn-secondary{% endif %}"
            href="{{ url_for('chess_routes.chess_online') }}"
        >
            ğŸŒ Ajedrez Online
        </a>
    </div>

    <!-- Panel de estado -->
    <div class="top-info">
        <div id="turno">Turno: Blancas</div>
    </div>

    <div class="chess-clocks">
        <div id="clock-white" class="clock white">
            â™” Blancas
            <span class="time">--:--</span>
        </div>
        <div id="clock-black" class="clock black">
            â™š Negras
            <span class="time">--:--</span>
        </div>
    </div>



    <!-- Tablero con coordenadas -->
    <div class="chess-wrapper white-view" id="chess-wrapper">

        <div class="files top"></div>

        <div class="board-row">
            <div class="ranks left"></div>

            <div id="chessboard" class="chessboard"></div>

            <div class="ranks right"></div>
        </div>

        <div class="files bottom"></div>
    </div>

    <div id="promotionModal" class="promotion-modal" style="display:none">
        <button data-piece="q">â™•</button>
        <button data-piece="r">â™–</button>
        <button data-piece="b">â™—</button>
        <button data-piece="n">â™˜</button>
    </div>

    <!-- ÃšNICO estado del juego -->
    <div id="message" class="message"></div>

    <div class="game-actions">
        <button id="resignBtn">ğŸ³ï¸ Rendirse</button>
        <button id="offerDrawBtn">ğŸ¤ Ofrecer tablas</button>
        <button id="acceptDrawBtn" hidden>âœ… Aceptar tablas</button>
        <button id="rejectDrawBtn" hidden>âŒ Rechazar</button>
    </div>


    <div id="roomControls">
        <div class="time-selector">
            <label for="timeControl">â±ï¸ Tiempo de partida:</label>
            <select id="timeControl">
                <option value="free">Sin reloj</option>
                <option value="10">10 minutos</option>
                <option value="30">30 minutos</option>
                <option value="60">60 minutos</option>
            </select>
        </div>

        <button id="createRoomBtn">Crear sala</button>
        <input id="roomCode" placeholder="CÃ³digo" />
        <button id="joinRoomBtn">Unirse</button>
    </div>


    <div class="top-info">
        <a href="{{ url_for('main.home') }}" class="chess-boton"> â¬… Volver a Juegos JCM </a>
    </div>
</div>

{% endblock %} {% block extra_js %}
<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
<script type="module" src="{{ url_for('static', filename='js/chess/chess_online.js') }}"></script>
{% endblock %}
