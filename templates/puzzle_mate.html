{% extends "base.html" %}

{% block title %}Puzzle MatemÃ¡tico{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/puzzle_mate.css') }}">
{% endblock %}

{% block content %}
<div class="game-container puzzle-container">
    <h1>Puzzle MatemÃ¡tico</h1>

    <!-- Panel usuario -->
    <div class="user-panel">
        <!-- Vista invitado -->
        <div id="puzzleUserGuest">
            <p class="user-status">
                EstÃ¡s jugando como <strong>invitado</strong>.  
                Inicia sesiÃ³n desde la parte superior para guardar tus resultados y aparecer en el ranking.
            </p>
        </div>

        <!-- Vista logueado -->
        <div id="puzzleUserLogged" class="hidden">
            <p>ğŸ‘¤ SesiÃ³n iniciada como: <strong id="puzzleUserName"></strong></p>
        </div>
    </div>

    <hr>

    <!-- Controles superiores -->
    <div id="topbar">
        <label for="difficultySelect">Dificultad:</label>
        <select id="difficultySelect">
            <option value="easy">FÃ¡cil</option>
            <option value="medium">Media</option>
            <option value="pro">Pro</option>
            <option value="infernal">Infernal ğŸ˜ˆ</option>
        </select>

        <button id="newPuzzleBtn">Nuevo puzzle</button>
        <button id="restartBtn">Reiniciar</button>
    </div>

    <!-- HUD -->
    <div id="hud">
        <div>Vidas: <span id="lives"></span></div>
        <div>Operaciones resueltas: <span id="solvedCount"></span>/<span id="totalEq"></span></div>
    </div>

    <!-- Tablero + nÃºmeros -->
    <div id="board"></div>

    <div id="numbers"></div>

    <div id="message"></div>
</div>

<div class="ranking-container">
    <section>
        <h2>ğŸ† Ranking global (todos los juegos)</h2>
        <ul id="puzzleGlobalRankingList"></ul>
    </section>

    <section>
        <h3>ğŸ¯ Ranking por dificultad actual (puzzle)</h3>
        <p id="puzzleDifficultyTitle"></p>
        <ul id="puzzleDifficultyRankingList"></ul>
    </section>

    <section>
        <h3>ğŸ“œ Historial de partidas (puzzle)</h3>
        <button id="puzzleHistoryToggleBtn">Ver / ocultar historial</button>
        <ul id="puzzleHistoryList" style="display:none;"></ul>
    </section>
</div>


<a href="{{ url_for('main.home') }}" class="back-link">â¬… Volver a Juegos JCM</a>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/puzzle_mate.js') }}" defer></script>
{% endblock %}
