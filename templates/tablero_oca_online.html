{% extends "base.html" %}

{% block title %}ğŸŒ Tablero Online â€” JCM{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/tablero_oca.css') }}" />
{% endblock %}

{% block content %}
<div class="game-container tablero-container">
    <h1>ğŸŒ Tablero Online â€” JCM</h1>
    <p>Juega desde 2 mÃ³viles Â· Por turnos Â· Comparte el cÃ³digo de partida</p>

    <a class="btn-secondary back-link-top" href="{{ url_for('main.home') }}">
        â† Volver al inicio
    </a>

    <div class="modo-links">
        <a class="btn-secondary" href="{{ url_for('main.tablero_oca') }}">ğŸ² Tablero (local)</a>
        <a class="btn-primary" href="{{ url_for('main.tablero_oca_online') }}">
            ğŸŒ Tablero Online
        </a>
    </div>

    <main id="tablero_principal" class="tablero-main">
        <!-- Panel ONLINE: crear / unirse -->
        <section class="panel-config" id="onlinePanel">
            <h2>Conectar a una partida</h2>

            <div class="config-block">
                <label for="onlineName">Tu nombre:</label>
                <input id="onlineName" type="text" placeholder="Ej: JesÃºs" />
            </div>

            <div class="config-block online-actions">
                <button id="btnCrear">Crear partida</button>

                <input id="onlineCode" type="text" placeholder="CÃ³digo (ej: A1B2C)" />
                <button id="btnUnir">Unirme</button>
            </div>

            <div class="config-block online-info">
                <p>
                    <strong>CÃ³digo:</strong> <span id="codeLabel">â€”</span>
                    &nbsp;|&nbsp;
                    <strong>Tu ID:</strong> <span id="playerLabel">â€”</span>
                </p>
                <p class="online-hint">
                    ğŸ“Œ Crea la partida y pasa el cÃ³digo al otro mÃ³vil. Cuando os unÃ¡is,
                    empezÃ¡is a tirar por turnos.
                </p>
            </div>
        </section>

        <section class="panel-tablero">
            <div id="salida" class="casilla casilla-salida">
                <span class="salida-label">SALIDA</span>
                <div id="salida-fichas"></div>
            </div>

            <div id="tablero" class="tablero"></div>
        </section>

        <section class="panel-controles">
            <div class="zona-dado">
                <button id="tirarDado" disabled>Tirar dado</button>
                <div id="dadoVisual" class="dado-visual"></div>
            </div>

            <div id="turnoJugador"></div>
            <div id="estadoJuego"></div>

            <button id="mostrarReglas">Mostrar Reglas</button>
        </section>

        <section class="reglas">
            <h2>CÃ³mo funciona el tablero online</h2>
            <p><strong>Tablero:</strong> 55 casillas numeradas del 1 al 55.</p>
            <p>
                <strong>Jugadores:</strong> hasta 6 por partida. Cada jugador entra desde su mÃ³vil.
            </p>
        </section>

        <a class="btn-secondary back-link-top" href="{{ url_for('main.home') }}">
            â† Volver al inicio
        </a>
    </main>

    <!-- Overlay ganador -->
    <div id="winnerOverlay" class="winner-overlay">
        <div class="winner-card">
            <h2>ğŸ‰ Â¡Ganador!</h2>
            <p id="winnerName"></p>
            <button id="closeWinner">Cerrar</button>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/tablero_oca_online.js') }}"></script>
{% endblock %}
